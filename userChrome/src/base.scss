/*
  Opera One Light Theme: https://color.firefox.com/?theme=XQAAAAKxAQAAAAAAAABBKYhm849SCia9U4KEGccwS-xMDPsqvXkIbAF6EJDWcx9sS_Bi3JZGE6ZZI2STfI2PTljkkz9gsyIAA4rg52EZbTFyuKwnXxno8392VlMcfZhPucRqNGYDAVZm1opH4-iMGRiqc3B9c1MPPmK53DSbJF8BZdZKpzfDapCiycb_zxKAlo4jW4PfG1z2lRJRtFFASfzKLXhmCrO_Cn8HSd8A9oLncObfGBEPHudnhpytIYZxPf5D7U0MJhJvX9gYclL68q1YjWOTY3cft5CVKtOBjKX3Geb_lJsoAA

  Opera One Dark Theme: https://color.firefox.com/?theme=XQAAAALbAQAAAAAAAABBKYhm849SCicxcT-BCXcGHf3p79EhVPYPRdriUDkvBpmWysCv-Zw_c6APJcQtt-XOfHhINmc-3uImDNBOA4JD37r_S9CeYgHzlx6KEeFqpy4LBxxPJVVi1JFKzHFodzdIsDTMxAcZkU199kc1jW3kJg2QniVg8jvUHvlSEd5MjQHBlj21ngkz_KIpbwB5scQ4tJVAJ0eAIP8PyiE05XWran2hih3l985u-lZJIrj6BV1eI71A8zYb_RcXr_aND59iCJoKeE08m9aa5VZOJey68VepM8kC7k5PgOKr9vLiGV-gaByYTFIpj6GHe8Ujrw9Y_lXNXw

	Custom:
		brown: https://color.firefox.com/?theme=XQAAAAL0AQAAAAAAAABBKYhm849SCicxcT_m3XcGHf3p79EhVPWpinvxzYs-OyjWwgC4cCxwdhMGJnUGuoZuEbNGXq6DyqgZeeoJvSAAq83TLPO0nd3DjAUR2QYhhzfEa19EWMa95FBzFwkzxpLiUXulKonO44Cc-aegbsLDtpONZ_ZUJVF2UGeqVMswmR7WyASGT706JrXCvrR3QjDhrnczFv2u8_mKIE1f-29JD3Ta1DZhLGlNwIoi3oZlU7HL2Xy5qLJBKvtpr0qehNH3eHpgUTCXO31T8hQmhbWNQ0ZBx2U45KX4OIgcUJcF-t2h4J9buqtL0P__Xw09AA
*/

/*
  widget.non-native-theme.scrollbar.size.override = 12
  widget.non-native-theme.scrollbar.style = 2
*/

:root {
	--gap: 0.25rem;
	--radius: 6px;
}

@if $defaultColors {
	:root {
		--base-bg: light-dark(#d0dbe3, #030614);
		--titlebar-bg: transparent;
		--toolbar-bg: light-dark(#fff, #252835);
		--tab-selected-bg: light-dark(#ffffff, #3a3e54);
		--searchbar-bg: light-dark(#fff, #252835);
		--searchbar-focus-bg: light-dark(#e7edf1, #484d64);
		--sidebar-bg: light-dark(#fff, #252835);
		--searchbar-color: light-dark(#000, #fff);
		// --sidebar-search-box-bg: #e6eef5;
		--sidebar-search-box-bg: light-dark(
			color-mix(in hsl, white 20%, transparent),
			color-mix(in hsl, black 20%, transparent)
		);
		// --sidebar-search-image-filter: unset;
		--sidebar-search-image-filter: light-dark(
			brightness(0) opacity(0.5),
			brightness(2) opacity(0.5)
		);
		--toolbar-btn-bg: light-dark(#e7edf1, #1a1d2b);
		--tab-island-bg: light-dark(#e7edf1, #1a1d2b);
		--tab-island-blue: #2e78f6;
		--tab-island-turquoise: #7bc6d7;
		--tab-island-green: #57bf94;
		--tab-island-lightgreen: #99d17b;
		--tab-island-yellow: #eec574;
		--tab-island-orange: #ef8d4b;
		--tab-island-red: #e24c5e;
		--tab-island-pink: #f26ca7;
		--tab-island-purple: #aa78df;
		--tab-island-tomato: #d62246;
		--tab-island-toolbar: #858585;
	}
} @else {
	:root {
		--base-bg: inherit;
		--titlebar-bg: inherit;
		--searchbar-bg: var(--toolbar-field-background-color, transparent);
		--searchbar-color: var(--toolbar-field-color, currentColor);
		--tab-selected-bg: var(--tab-selected-bgcolor, light-dark(white, #111111));
		--toolbar-bg: color-mix(
			in hsl,
			var(--toolbar-bgcolor, inherit) 95%,
			light-dark(white, black)
		);
		--sidebar-bg: color-mix(
			in hsl,
			var(--sidebar-background-color, inherit) !important 90%,
			light-dark(black, white)
		);
		--sidebar-search-box-bg: color-mix(
			in hsl,
			light-dark(black, white) 10%,
			transparent
		);
		--sidebar-search-image-filter: light-dark(
			brightness(0) opacity(0.5),
			brightness(2) opacity(0.5)
		);
		--toolbar-btn-bg: color-mix(
			in hsl,
			var(--toolbar-bgcolor, light-dark(white, black)) 95%,
			light-dark(black, white)
		);
		--tab-island-bg: light-dark(
			color-mix(in hsl, transparent 92.5%, black),
			color-mix(in hsl, transparent 92.5%, white)
		);
		--tab-island-blue: #2e78f6;
		--tab-island-turquoise: #7bc6d7;
		--tab-island-green: #57bf94;
		--tab-island-lightgreen: #99d17b;
		--tab-island-yellow: #eec574;
		--tab-island-orange: #ef8d4b;
		--tab-island-red: #e24c5e;
		--tab-island-pink: #f26ca7;
		--tab-island-purple: #aa78df;
		--tab-island-tomato: #d62246;
		--tab-island-toolbar: #858585;
	}
}

menu,
menupopup,
.menupopup-arrowscrollbox,
.menupopup {
	border: 1px solid transparent !important;
	border: none !important;
}

hbox.newTabBrowserPanel {
	padding-top: 0 !important;
}

#browser {
	background: var(--base-bg);
	padding: var(--gap);
	padding-top: 0 !important;
}

#sidebar-splitter {
	opacity: 0;
	// display: none;
	// margin-inline: calc(var(--gap) / 2 - 3.5px) !important;
	width: var(--gap) !important;
	min-width: unset !important;
	border: none !important;
	padding: 0;
	margin-inline-start: unset !important;
}

#sidebar-box {
	border-radius: var(--radius) !important;
	overflow: hidden !important;
	// margin-right: var(--gap);
	max-width: 50dvw !important;
	min-width: 50px !important;
	padding-top: 0px !important;
	z-index: 0 !important;
	text-shadow: none !important;
	background: transparent !important;
	margin: 0 !important;

	// background: var(--sidebar-background-color, var(--toolbar-bgcolor, #fff));
	// color: var(--sidebar-text-color, var(--toolbar-color, #000));
}

#sidebar-header {
	overflow: hidden;
	scrollbar-width: none;
	// scrollbar-color: rgba(0 0 0 / 0.2) transparent;
	border: none !important;
	border-radius: var(--radius);
	container-type: inline-size;
	background: var(--sidebar-bg) !important;

	#sidebar-switcher-target {
		width: 100%;
	}

	@container (width < 200px) {
		#sidebar-title,
		#sidebar-switcher-arrow,
		#sidebar-throbber,
		#sidebar-spacer,
		#sidebar-close {
			display: none;
		}
	}

	@container (width < 200px) {
		#sidebar-switcher-arrow,
		#sidebar-throbber,
		#sidebar-spacer,
		#sidebar-close {
			display: none;
		}
	}
}

#sidebar {
	border-radius: var(--radius) !important;
	margin-top: var(--gap) !important;
	background: var(--sidebar-bg) !important;
}

.sidebar-panel[lwt-sidebar] {
	background: transparent !important;
}

@-moz-document url("chrome://browser/content/syncedtabs/sidebar.xhtml")
{
	html,
	body {
		background-color: transparent !important;
	}
}

#urlbar-background {
	background: var(--searchbar-bg) !important;
	color: var(--searchbar-color) !important;
	border: none !important;
}

#appcontent {
	border-radius: var(--radius);
	overflow: hidden;
}

#TabsToolbar tab .tab-background {
	outline: none !important;
	// outline-color: color-mix(in lch, black 20%, var(--lwt-accent-color)) !important;
	margin-block: 0 !important;
	min-height: unset !important;
}

#PersonalToolbar {
	// margin-top: var(--gap);
	margin-inline: var(--gap);
	// margin-bottom: var(--gap);
	border-radius: var(--radius);
	background: var(--toolbar-bg) !important;
}

.tabbrowser-tab {
	@if $tabIslandsEnabled {
		--identity-tab-color: transparent !important;
		--identity-icon-color: transparent !important;
	}
	height: 34px !important;

	&[selected="true"] .tab-background {
		background: var(--tab-selected-bg) !important;
	}
}

#tabbrowser-arrowscrollbox {
	height: 34px !important;
	align-items: center;
	margin-top: 1.25px !important;
}

/*_______________________________*/

#titlebar {
	background: var(--titlebar-bg) !important;
	margin-top: var(--gap) !important;
	margin-inline: calc(var(--gap) / 2) !important;
}

#nav-bar {
	border-radius: var(--radius);
	box-shadow: none !important;
	// margin-top: var(--gap);
	// margin-top: -1px;
	margin-inline: var(--gap);
	background: var(--toolbar-bg) !important;
}

.titlebar-close,
.titlebar-restore,
.titlebar-min,
.titlebar-max {
	// padding: 0.75rem !important;
	width: 0.75rem !important;
	aspect-ratio: 1/1 !important;
	border-radius: var(--radius) !important;
}

.toolbar-button#scrollbutton-down {
	height: 100% !important;
}

#navigator-toolbox {
	border-bottom: none !important;
	margin-bottom: 0 !important;
	padding-bottom: var(--gap) !important;
	// border-radius: var(--radius) !important;

	@if $defaultColors {
		background: var(--base-bg) !important;
	} @else {
		&:-moz-lwtheme {
			background: var(--lwt-accent-color) !important;

			& + #browser {
				background: var(--lwt-accent-color) !important;

				#sidebar-header {
					background: var(--toolbar-bg) !important;
				}
			}
		}
	}

	// :not(:has(:root[lwtheme-image] &)) {
	// 	background: var(--base-bg) !important;
	// }

	// :has(:root[lwtheme-image] &) #titlebar {
	// 	background: transparent !important;
	// }
}

#TabsToolbar #firefox-view-button[open] > .toolbarbutton-icon,
#tabbrowser-tabs:not([noshadowfortests])
	.tab-background:is([selected], [multiselected]) {
	// box-shadow: 0 0 4px rgba(0,0,0,0.25) !important;
	// box-shadow: none !important;
	box-shadow: 0px 0px 2px rgba(100 100 100 / 0.6) !important;
}

#navigator-toolbox:has(#PersonalToolbar[collapsed="false"]) {
	#nav-bar {
		border-bottom-left-radius: 0;
		border-bottom-right-radius: 0;
	}

	#PersonalToolbar {
		border-top-right-radius: 0;
		border-top-left-radius: 0;
	}
}

.tab-secondary-label {
	display: none;
}

/* "flexible" space between toolbar buttons */
toolbarspring {
	flex: unset !important;
	width: 1rem;

	+ toolbarspring {
		width: 2rem;

		+ toolbarspring {
			width: 4rem;

			+ toolbarspring {
				width: 8rem;
			}
		}
	}
}

#nav-bar-customization-target toolbaritem[data-extensionid] {
	toolbarbutton {
		background: var(--toolbar-btn-bg) !important;
	}
}

/* single extension button or last toolbarbutton is extension button */
#nav-bar-customization-target
	:not(toolbaritem[data-extensionid])
	+ toolbaritem[data-extensionid]:has(+ :not(toolbaritem[data-extensionid])),
#nav-bar-customization-target toolbaritem:last-child:has([data-extensionid]) {
	toolbarbutton {
		border-top-right-radius: var(--radius) !important;
		border-bottom-right-radius: var(--radius) !important;
	}
}

/* first extension button of group */
#nav-bar-customization-target
	:not(toolbaritem[data-extensionid])
	+ toolbaritem[data-extensionid] {
	margin-right: 0 !important;

	toolbarbutton {
		border-top-left-radius: var(--radius) !important;
		border-bottom-left-radius: var(--radius) !important;
	}
}

/* inbetween extension buttons of group */
#nav-bar-customization-target
	toolbaritem[data-extensionid]
	+ toolbaritem[data-extensionid]:has(+ toolbaritem[data-extensionid]) {
	margin: 0 !important;
	// toolbarbutton {}
}

/* last extension button of group */
#nav-bar-customization-target
	:not(toolbaritem[data-extensionid])
	+ toolbaritem[data-extensionid]
	~ toolbaritem[data-extensionid]:has(+ :not(toolbaritem[data-extensionid])) {
	margin-left: 0 !important;
	toolbarbutton {
		border-top-right-radius: var(--radius) !important;
		border-bottom-right-radius: var(--radius) !important;
	}
}

@import "./tab-islands.scss";
@import "./no-tab-islands.scss";

@if $tabIslandsEnabled {
	// @import "./tab-islands.scss";
	@include tab-islands();
} @else {
	// @import "./no-tab-islands.scss";
	@include no-tab-islands();
}
@import "./sidebar.scss";
